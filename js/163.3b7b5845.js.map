{"version":3,"file":"js/163.3b7b5845.js","mappings":"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","sources":["webpack://annual-report/./src/pages/CategoryPage.vue","webpack://annual-report/./src/pages/CategoryPage.vue?6fe4"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen bg-gray-50\">\r\n    <div class=\"container mx-auto p-6\">\r\n      <!-- Loading State -->\r\n      <div v-if=\"loading\" class=\"flex items-center justify-center py-20\">\r\n        <div class=\"flex items-center gap-3\">\r\n          <div class=\"animate-spin rounded-full h-6 w-6 border-b-2 border-[#e53935]\"></div>\r\n          <span class=\"text-gray-700 font-medium\">Loading categories...</span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Main Content -->\r\n      <div v-else class=\"mx-auto\">\r\n        <h2 class=\"text-3xl font-bold text-[#e53935] mb-6 text-left\">Category List</h2>\r\n\r\n        <!-- Search & Add -->\r\n        <div class=\"flex flex-wrap gap-4 mb-4 items-center\">\r\n          <input v-model=\"searchQuery\" type=\"text\" placeholder=\"Search categories...\"\r\n            class=\"border border-gray-300 rounded-lg px-4 py-2 w-full md:w-1/3 focus:outline-none focus:ring-2 focus:ring-[#e53935] placeholder-gray-400\" />\r\n          <select v-model=\"statusFilter\"\r\n            class=\"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#e53935]\">\r\n            <option value=\"\">All Status</option>\r\n            <option value=\"active\">Active</option>\r\n            <option value=\"inactive\">Inactive</option>\r\n          </select>\r\n          <button @click=\"openAddModal\"\r\n            class=\"ml-auto bg-[#5c6ac4] text-white px-4 py-2 rounded-lg hover:bg-[#4855a3] flex items-center gap-2\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\"\r\n              stroke=\"currentColor\">\r\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\" />\r\n            </svg>\r\n            Add Category\r\n          </button>\r\n        </div>\r\n\r\n        <!-- Category Table -->\r\n        <table class=\"w-full table-auto bg-white rounded-xl shadow overflow-hidden\">\r\n          <thead class=\"bg-gray-200 text-gray-700\">\r\n            <tr>\r\n              <th class=\"py-3 px-6\">#</th>\r\n              <th class=\"py-3 px-6\">Title</th>\r\n              <th class=\"py-3 px-6\">Description</th>\r\n              <th class=\"py-3 px-6\">Status</th>\r\n              <th class=\"py-3 px-6\">Created</th>\r\n              <th class=\"py-3 px-6\">Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"cat in filteredCategories\" :key=\"cat.uuid\" class=\"border-b hover:bg-[#fff0f0] transition\">\r\n              <td class=\"py-3 px-6\">{{ cat.id }}</td>\r\n              <td class=\"py-3 px-6 font-semibold\">{{ cat.name }}</td>\r\n              <td class=\"py-3 px-6\">{{ cat.description }}</td>\r\n              <td class=\"py-3 px-6\">\r\n                <span :class=\"cat.is_active ? 'text-green-600' : 'text-gray-400'\">\r\n                  {{ cat.is_active ? \"Active\" : \"Inactive\" }}\r\n                </span>\r\n              </td>\r\n              <td class=\"py-3 px-6\">{{ formatDate(cat.created_at) }}</td>\r\n              <td class=\"py-3 px-6 flex gap-2\">\r\n                <button @click=\"openEditModal(cat)\" class=\"bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600\">\r\n                  Edit\r\n                </button>\r\n                <button @click=\"openDeleteModal(cat)\" class=\"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600\">\r\n                  Delete\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        <div class=\"pagination\">\r\n          <button @click=\"prevPage\" :disabled=\"page === 1\">Previous</button>\r\n          <span>Page {{ page }} of {{ totalPages }}</span>\r\n          <button @click=\"nextPage\" :disabled=\"page === totalPages\">Next</button>\r\n        </div>\r\n        <div v-if=\"filteredCategories.length === 0\" class=\"text-center text-gray-500 mt-6\">\r\n          No categories found.\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Add Modal -->\r\n      <div v-if=\"showAddModal\" class=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\">\r\n        <div class=\"bg-white rounded-xl shadow p-6 w-full max-w-md\">\r\n          <h3 class=\"text-xl font-bold text-[#5c6ac4] mb-4\">Add New Category</h3>\r\n          <div class=\"flex flex-col gap-3\">\r\n            <input v-model=\"newCategory.name\" placeholder=\"Name\" class=\"border rounded px-3 py-2 focus:outline-none\" />\r\n            <textarea v-model=\"newCategory.description\" placeholder=\"Description\"\r\n              class=\"border rounded px-3 py-2 focus:outline-none\"></textarea>\r\n            <label class=\"flex items-center gap-2\">\r\n              <input type=\"checkbox\" v-model=\"newCategory.is_active\" /> Active\r\n            </label>\r\n          </div>\r\n          <div class=\"flex justify-end gap-3 mt-4\">\r\n            <button @click=\"closeAddModal\" class=\"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400\">\r\n              Cancel\r\n            </button>\r\n            <button @click=\"saveAdd\" class=\"px-4 py-2 rounded bg-[#5c6ac4] text-white hover:bg-[#4855a3]\">\r\n              Add\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Edit Modal -->\r\n      <div v-if=\"showEditModal\" class=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\">\r\n        <div class=\"bg-white rounded-xl shadow p-6 w-full max-w-md\">\r\n          <h3 class=\"text-xl font-bold text-[#e53935] mb-4\">Edit Category</h3>\r\n          <div class=\"flex flex-col gap-3\">\r\n            <input v-model=\"editCategory.name\" placeholder=\"Name\" class=\"border rounded px-3 py-2 focus:outline-none\" />\r\n            <textarea v-model=\"editCategory.description\" placeholder=\"Description\"\r\n              class=\"border rounded px-3 py-2 focus:outline-none\"></textarea>\r\n            <label class=\"flex items-center gap-2\">\r\n              <input type=\"checkbox\" v-model=\"editCategory.is_active\" /> Active\r\n            </label>\r\n          </div>\r\n          <div class=\"flex justify-end gap-3 mt-4\">\r\n            <button @click=\"closeEditModal\" class=\"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400\">\r\n              Cancel\r\n            </button>\r\n            <button @click=\"saveEdit\" class=\"px-4 py-2 rounded bg-[#e53935] text-white hover:bg-[#c62828]\">\r\n              Save\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Delete Modal -->\r\n      <div v-if=\"showDeleteModal\" class=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\">\r\n        <div class=\"bg-white rounded-xl shadow p-6 w-full max-w-sm\">\r\n          <h3 class=\"text-xl font-bold text-[#e53935] mb-4\">Delete Category</h3>\r\n          <p>\r\n            Are you sure you want to delete <strong>{{ deleteCategory.name }}</strong>?\r\n          </p>\r\n          <div class=\"flex justify-end gap-3 mt-4\">\r\n            <button @click=\"closeDeleteModal\" class=\"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400\">\r\n              Cancel\r\n            </button>\r\n            <button @click=\"confirmDelete\" class=\"px-4 py-2 rounded bg-red-500 text-white hover:bg-red-600\">\r\n              Delete\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { categoryApiService } from \"@/service/category/category.api.service\";\r\nimport { categoryLocalService } from \"@/service/category/category.local.service\";\r\nimport { useChatStore } from \"@/stores/socket/chat-store\";\r\nimport { ref, onMounted, onUnmounted, computed, watch } from \"vue\";\r\n\r\nconst categories = ref([]);\r\nconst loading = ref(false);\r\nconst page = ref(1)\r\nconst limit = ref(5)\r\nconst totalPages = ref(1)\r\nconst isSubmitStatus = ref(0)\r\n\r\nconst chatStore = useChatStore();\r\n\r\nasync function handleGlobalMessage(data) {\r\n  const newData = data?.new_data;\r\n  const prev_data = data?.prev_data;\r\n\r\n  if (isSubmitStatus.value === 1) return; // skip if submitting\r\n\r\n  if (data.operation_type === \"delete\") {\r\n    // remove from local storage/service\r\n    await categoryLocalService.remove(prev_data.uuid);\r\n    try {\r\n      const res = await categoryApiService.getAll(page.value, limit.value);\r\n      totalPages.value = res.total || 1\r\n      categories.value = res.data || [];\r\n    } catch (error) {\r\n      console.log('error: ', error);\r\n    }\r\n  }\r\n\r\n  if (!newData) return;\r\n  // handle create / update\r\n  await categoryLocalService.processQueueSave(newData);\r\n\r\n  const index = categories.value.findIndex(item => item.id === newData.id);\r\n  if (index !== -1) {\r\n    // update existing item (keep its position)\r\n    categories.value[index] = { ...categories.value[index], ...newData };\r\n  } else {\r\n    // add newData to the top\r\n    categories.value.unshift(newData);\r\n\r\n    // enforce limit (remove last if over)\r\n    if (categories.value.length > limit.value) {\r\n      categories.value.pop();\r\n    }\r\n  }\r\n}\r\n\r\nconst fetchCategories = async () => {\r\n  loading.value = true;\r\n  try {\r\n    const res = await categoryApiService.getAll(page.value, limit.value);\r\n    totalPages.value = res.total || 1\r\n    categories.value = res.data || [];\r\n  } catch (err) {\r\n    console.error(\"API error:\", err);\r\n    categories.value = [];\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\n// Pagination functions\r\nconst nextPage = () => {\r\n  if (page.value < totalPages.value) page.value++\r\n}\r\nconst prevPage = () => {\r\n  if (page.value > 1) page.value--\r\n}\r\n\r\n// onMounted(fetchCategories);\r\nonMounted(async () => {\r\n  await fetchCategories();\r\n  chatStore.on(\"category\", handleGlobalMessage);\r\n});\r\nwatch(page, fetchCategories)\r\n\r\nonUnmounted(() => {\r\n  // Remove listener to prevent memory leaks\r\n  chatStore.off(\"category\", handleGlobalMessage);\r\n});\r\n\r\nconst formatDate = (dateStr) => {\r\n  return new Date(dateStr).toLocaleDateString(\"en-US\", {\r\n    year: \"numeric\",\r\n    month: \"short\",\r\n    day: \"numeric\",\r\n  });\r\n};\r\n\r\n// --- Search/filter ---\r\nconst searchQuery = ref(\"\");\r\nconst statusFilter = ref(\"\");\r\n\r\nconst filteredCategories = computed(() => {\r\n  return categories.value.filter((cat) => {\r\n    const matchesName = cat.name.toLowerCase().includes(searchQuery.value.toLowerCase());\r\n    const matchesStatus =\r\n      statusFilter.value === \"\"\r\n        ? true\r\n        : statusFilter.value === \"active\"\r\n          ? cat.is_active\r\n          : !cat.is_active;\r\n    return matchesName && matchesStatus;\r\n  });\r\n});\r\n\r\n// --- Add ---\r\nconst showAddModal = ref(false);\r\nconst newCategory = ref({ name: \"\", description: \"\", is_active: true });\r\n\r\nconst openAddModal = () => {\r\n  newCategory.value = { name: \"\", description: \"\", is_active: true };\r\n  showAddModal.value = true;\r\n};\r\nconst closeAddModal = () => {\r\n  showAddModal.value = false;\r\n};\r\n\r\nconst saveAdd = async () => {\r\n  try {\r\n    isSubmitStatus.value = 1;\r\n    const res = await categoryApiService.create(newCategory.value);\r\n    if (res) {\r\n      await fetchCategories();\r\n      closeAddModal();\r\n      isSubmitStatus.value = 0;\r\n    } else {\r\n      isSubmitStatus.value = 0;\r\n      alert(\"Failed to add category: \" + JSON.stringify(res));\r\n    }\r\n  } catch (err) {\r\n    isSubmitStatus.value = 0;\r\n    alert(\"Failed to add category: \" + err.message);\r\n  }\r\n};\r\n\r\n// --- Edit ---\r\nconst showEditModal = ref(false);\r\nconst editCategory = ref({});\r\n\r\nconst openEditModal = (cat) => {\r\n  editCategory.value = { ...cat };\r\n  showEditModal.value = true;\r\n};\r\nconst closeEditModal = () => {\r\n  showEditModal.value = false;\r\n};\r\n\r\nconst saveEdit = async () => {\r\n  try {\r\n    isSubmitStatus.value = 1;\r\n    const res = await categoryApiService.update(editCategory.value.uuid, {\r\n      name: editCategory.value.name,\r\n      description: editCategory.value.description,\r\n      is_active: editCategory.value.is_active,\r\n    });\r\n    if (res) {\r\n      await fetchCategories();\r\n      closeEditModal();\r\n      isSubmitStatus.value = 0;\r\n    } else {\r\n      isSubmitStatus.value = 0;\r\n      alert(\"Failed to add category: \" + JSON.stringify(res.data));\r\n    }\r\n  } catch (err) {\r\n    isSubmitStatus.value = 0;\r\n    alert(\"Failed to update category: \" + err.message);\r\n  }\r\n};\r\n\r\n// --- Delete ---\r\nconst showDeleteModal = ref(false);\r\nconst deleteCategory = ref({});\r\n\r\nconst openDeleteModal = (cat) => {\r\n  deleteCategory.value = cat;\r\n  showDeleteModal.value = true;\r\n};\r\nconst closeDeleteModal = () => {\r\n  showDeleteModal.value = false;\r\n};\r\n\r\nconst confirmDelete = async () => {\r\n  try {\r\n    isSubmitStatus.value = 1;\r\n    const res = await categoryApiService.delete(deleteCategory.value.uuid);\r\n    if (res) {\r\n      await fetchCategories(); // refresh table\r\n      closeDeleteModal();\r\n      isSubmitStatus.value = 0;\r\n    } else {\r\n      const data = await res.json();\r\n      isSubmitStatus.value = 0;\r\n      alert(\"Failed to delete category: \" + JSON.stringify(data));\r\n    }\r\n  } catch (err) {\r\n    isSubmitStatus.value = 0;\r\n    alert(\"Failed to delete category: \" + err.message);\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.pagination {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  gap: 10px;\r\n  align-items: center;\r\n}\r\n\r\ntable th,\r\ntable td {\r\n  text-align: left;\r\n}\r\n</style>\r\n","import script from \"./CategoryPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CategoryPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./CategoryPage.vue?vue&type=style&index=0&id=1e9ad26a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1e9ad26a\"]])\n\nexport default __exports__"],"names":["categories","ref","loading","page","limit","totalPages","isSubmitStatus","chatStore","useChatStore","async","handleGlobalMessage","data","newData","new_data","prev_data","value","operation_type","categoryLocalService","remove","uuid","res","categoryApiService","getAll","total","error","console","log","processQueueSave","index","findIndex","item","id","unshift","length","pop","fetchCategories","err","nextPage","prevPage","onMounted","on","watch","onUnmounted","off","formatDate","dateStr","Date","toLocaleDateString","year","month","day","searchQuery","statusFilter","filteredCategories","computed","filter","cat","matchesName","name","toLowerCase","includes","matchesStatus","is_active","showAddModal","newCategory","description","openAddModal","closeAddModal","saveAdd","create","alert","JSON","stringify","message","showEditModal","editCategory","openEditModal","closeEditModal","saveEdit","update","showDeleteModal","deleteCategory","openDeleteModal","closeDeleteModal","confirmDelete","delete","json","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_cache","class","_hoisted_4","_hoisted_5","$event","type","placeholder","onClick","xmlns","fill","viewBox","stroke","d","_hoisted_6","_Fragment","_renderList","key","_hoisted_7","_toDisplayString","_hoisted_8","_hoisted_9","_hoisted_10","_normalizeClass","_hoisted_11","created_at","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","disabled","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","__exports__"],"sourceRoot":""}