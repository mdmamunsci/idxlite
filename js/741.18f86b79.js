"use strict";(self["webpackChunkannual_report"]=self["webpackChunkannual_report"]||[]).push([[741],{47741:function(e,t,a){a.r(t),a.d(t,{default:function(){return j}});var n=a(56768),s=(a(14603),a(47566),a(98721),a(24232)),r=a(90144),i=a(4574),u=(a(18111),a(54972),a(14869)),c=a(73948),o=a(85037);const l={async getAll(e=1,t=10){try{await(0,c.fC)();const a=await(0,u.I)(),n=(0,o.getIDBRepository)(a,i.V),[s,r]=await n.createQueryBuilder("p").skip((e-1)*t).take(t).orderBy({created_at:"DESC"}).findAndCount();return{data:s,total:r,page:Number(e),last_page:Math.ceil(r/t)}}catch(a){return console.error("Failed to fetch assetRepo:",a),{success:!1,message:a.message}}},async create(e){try{const t=await(0,u.I)(),a=(0,o.getIDBRepository)(t,i.V);e.created_at||(e.created_at=(new Date).toISOString()),e.updated_at||(e.updated_at=(new Date).toISOString());const n=await a.save(e);return{success:!0,data:n}}catch(t){return console.log("err: ",t),{success:!1,message:t.message}}},async update(e,t){try{const a=await(0,u.I)(),n=(0,o.getIDBRepository)(a,i.V),s=await n.createQueryBuilder("p").where({uuid:e}).getOne();if(!s)return{success:!1,message:"Not found"};Object.assign(s,t),await n.update(s.id,s);const r=await n.createQueryBuilder("p").where({uuid:e}).getOne();return{success:!0,data:r}}catch(a){return{success:!1,message:a.message}}},async remove(e){try{const t=await(0,u.I)(),a=(0,o.getIDBRepository)(t,i.V),n=await a.createQueryBuilder("p").where({uuid:e}).getOne();return n?(await a.delete(n.id),{success:!0,message:"Deleted"}):{success:!1,message:"Not found"}}catch(t){return{success:!1,message:t.message}}},async processQueueSave(e){try{const t=await(0,u.I)(),a=(0,o.getIDBRepository)(t,i.V);e.id=Number(e.id);const n=await a.findOne(e.id);n?await a.update(e.id,e):await a.save(e)}catch(t){console.error("Error syncing categories:",t)}}},p={class:"uploader"},d=["disabled"],y={width:"100%"},k={width:"60%"},w={key:0,class:"preview"},f=["src","alt"],g={key:1,class:"preview"},m=["src"],v={key:2,class:"preview"},h={class:"w-full h-64",controls:""},L=["src","type"],b={key:3,class:"preview"},C={controls:""},_=["src","type"],E={key:4,class:"preview"},x=["src"],I={key:5,class:"preview text-center p-4"},X={class:"p-4 border rounded bg-gray-100"},B={class:"font-bold"},R={class:"text-sm text-gray-600"},D=["href"],O={key:6,class:"preview"},z=["href"],W={width:"20%"},A=["onClick"],F=["onClick"],S=["onClick"],K={key:0};var Q={__name:"FileUpload",setup(e){const t=(0,r.KR)(navigator.onLine),a=(0,r.KR)([]),u=(0,r.KR)([]),c=(0,r.KR)(!1);function o(e){const t=["B","KB","MB","GB"];let a=0,n=e;while(n>=1024&&a<t.length-1)n/=1024,a++;return`${n.toFixed(1)} ${t[a]}`}function Q(e){return e.type.startsWith("image/")}function V(e){return"application/pdf"===e.type}function U(e){return e.type.startsWith("video/")}function N(e){return e.type.startsWith("audio/")}function Y(e){return e.type.startsWith("text/")}function M(e){return"application/zip"===e.type||"application/x-zip-compressed"===e.type||"application/x-rar-compressed"===e.type||"application/x-7z-compressed"===e.type||e.name?.toLowerCase().endsWith(".zip")||e.name?.toLowerCase().endsWith(".rar")||e.name?.toLowerCase().endsWith(".7z")}function P(e){return URL.createObjectURL(e.file)}async function $(){const e=await l.getAll(1,500);a.value=e.data}async function j(e){let t=new i.V;const a=Array.from(e.target.files||[]);for(const n of a){const e={name:n.name,size:n.size,type:n.type,file:n,status:"pending"};t={...t,...e},await l.create(t)}await $()}async function G(e){const t=prompt("Enter new name:",e.name);t&&(e.name=t,e.status="pending",await l.update(e.uuid,e))}async function T(e){const t=document.createElement("input");t.type="file",t.onchange=async t=>{const a=t.target.files[0];a&&(e.name=a.name,e.size=a.size,e.type=a.type,e.file=a,e.status="pending",await l.update(e.uuid,e))},t.click()}async function Z(e){confirm(`Delete ${e.name}?`)&&(await l.remove(e.uuid),await $())}async function q(){c.value=!0}return(0,n.sV)(async()=>{await $()}),(0,n.xo)(()=>{}),(e,r)=>((0,n.uX)(),(0,n.CE)("div",p,[r[3]||(r[3]=(0,n.Lk)("h1",null,"File Uploader (Offline-first)",-1)),(0,n.Lk)("p",null,[r[0]||(r[0]=(0,n.eW)(" Status: ",-1)),(0,n.Lk)("strong",null,(0,s.v_)(t.value?"Online":"Offline"),1)]),(0,n.Lk)("input",{type:"file",multiple:"",onChange:j},null,32),(0,n.Lk)("button",{onClick:q,disabled:c.value},"Sync now",8,d),r[4]||(r[4]=(0,n.Lk)("h2",null,"Queue",-1)),(0,n.Lk)("table",y,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.value,e=>((0,n.uX)(),(0,n.CE)("tr",{key:e.id},[(0,n.Lk)("td",k,[Q(e)?((0,n.uX)(),(0,n.CE)("div",w,[(0,n.Lk)("img",{class:"h-auto max-w-full p-4",src:P(e),alt:e.name},null,8,f)])):V(e)?((0,n.uX)(),(0,n.CE)("div",g,[(0,n.Lk)("iframe",{src:P(e),frameborder:"0",class:"w-full h-64"},null,8,m)])):U(e)?((0,n.uX)(),(0,n.CE)("div",v,[(0,n.Lk)("video",h,[(0,n.Lk)("source",{src:P(e),type:e.type},null,8,L),r[1]||(r[1]=(0,n.eW)(" Your browser does not support the video tag. ",-1))])])):N(e)?((0,n.uX)(),(0,n.CE)("div",b,[(0,n.Lk)("audio",C,[(0,n.Lk)("source",{src:P(e),type:e.type},null,8,_),r[2]||(r[2]=(0,n.eW)(" Your browser does not support the audio tag. ",-1))])])):Y(e)?((0,n.uX)(),(0,n.CE)("div",E,[(0,n.Lk)("iframe",{src:P(e),frameborder:"0",class:"w-full h-64"},null,8,x)])):M(e)?((0,n.uX)(),(0,n.CE)("div",I,[(0,n.Lk)("div",X,[(0,n.Lk)("p",B,(0,s.v_)(e.name),1),(0,n.Lk)("p",R,(0,s.v_)(e.type||"Archive File"),1),(0,n.Lk)("a",{href:P(e),download:"",class:"mt-2 inline-block bg-blue-500 text-white px-3 py-1 rounded"}," Download ZIP ",8,D)])])):((0,n.uX)(),(0,n.CE)("div",O,[(0,n.Lk)("a",{href:P(e),target:"_blank",class:"text-blue-500 underline"},(0,s.v_)(e.name)+" ("+(0,s.v_)(e.type||"Unknown type")+") ",9,z)]))]),(0,n.Lk)("td",W,[(0,n.Lk)("h2",null,(0,s.v_)(e.name)+" ("+(0,s.v_)(o(e.size))+")",1)]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{onClick:t=>G(e)},"Rename",8,A),(0,n.Lk)("button",{onClick:t=>T(e)},"Replace",8,F),(0,n.Lk)("button",{onClick:t=>Z(e)},"Delete",8,S),e.uploading?((0,n.uX)(),(0,n.CE)("span",K," â€” uploading... ")):(0,n.Q3)("",!0)])]))),128))]),r[5]||(r[5]=(0,n.Lk)("h2",null,"Uploaded",-1)),(0,n.Lk)("table",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(u.value,e=>((0,n.uX)(),(0,n.CE)("tr",{key:e.ts},[(0,n.Lk)("td",null,(0,s.v_)(e.name),1)]))),128))])]))}},V=a(71241);const U=(0,V.A)(Q,[["__scopeId","data-v-edc4cd8a"]]);var N=U;const Y={key:0},M={key:1};var P={__name:"AboutPage",setup(e){return(e,t)=>((0,n.uX)(),(0,n.CE)("div",null,[t[0]||(t[0]=(0,n.Lk)("div",{class:"p-10 text-center"},[(0,n.Lk)("h2",{class:"text-3xl font-bold text-purple-600"},"About Page"),(0,n.Lk)("p",null,"This is the About page.")],-1)),(0,n.Lk)("div",null,[e.isMobile?((0,n.uX)(),(0,n.CE)("p",Y,"You are using a mobile device.")):((0,n.uX)(),(0,n.CE)("p",M,"You are using a desktop device.")),(0,n.bF)(N)])]))}};const $=P;var j=$}}]);
//# sourceMappingURL=741.18f86b79.js.map