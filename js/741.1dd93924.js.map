{"version":3,"file":"js/741.1dd93924.js","mappings":"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","sources":["webpack://annual-report/./src/service/asset.local.service.js","webpack://annual-report/./src/components/FileUpload.vue","webpack://annual-report/./src/components/FileUpload.vue?4ef7","webpack://annual-report/./src/pages/AboutPage.vue","webpack://annual-report/./src/pages/AboutPage.vue?cc88"],"sourcesContent":["// src/services/fileUploadLocalService.js\r\nimport { LocalDB } from '@/db';\r\nimport { Asset } from '@/entities/asset.entity';\r\nimport { getJWTUser } from '@/utils/jwt';\r\n\r\nimport { getSQLRepository } from '@mamunmo21/idxlite';\r\n\r\nexport const assetLocalService = {\r\n  async getAll(page = 1, limit = 10) {\r\n    try {\r\n      const user = await getJWTUser();\r\n      const db = await LocalDB();\r\n      const assetRepo = getSQLRepository(db, Asset);\r\n      const [data, total] = await assetRepo\r\n        .createQueryBuilder('p')\r\n        // .where({ is_deleted: false, user_uuid: user.uuid })\r\n        .skip((page - 1) * limit)\r\n        .take(limit)\r\n        .orderBy({ created_at: \"DESC\" })\r\n        .findAndCount();\r\n      return {\r\n        data,\r\n        total,\r\n        page: Number(page),\r\n        last_page: Math.ceil(total / limit),\r\n      };\r\n    } catch (err) {\r\n      console.error('Failed to fetch assetRepo:', err);\r\n      return { success: false, message: err.message };\r\n    }\r\n  },\r\n\r\n  async create(payload) {\r\n    try {\r\n      const db = await LocalDB();\r\n      const assetRepo = getSQLRepository(db, Asset);\r\n      if (!payload.created_at) {\r\n        payload.created_at = new Date().toISOString();\r\n      }\r\n      if (!payload.updated_at) {\r\n        payload.updated_at = new Date().toISOString();\r\n      }\r\n\r\n      const saved = await assetRepo.save(payload);\r\n      return { success: true, data: saved };\r\n    } catch (err) {\r\n      console.log('err: ', err);\r\n      return { success: false, message: err.message };\r\n    }\r\n  },\r\n\r\n  async update(uuid, payload) {\r\n    try {\r\n      const db = await LocalDB();\r\n      const assetRepo = getSQLRepository(db, Asset);\r\n      const cat = await assetRepo\r\n        .createQueryBuilder(\"p\")\r\n        .where({ uuid: uuid })\r\n        .getOne();\r\n      if (!cat) return { success: false, message: 'Not found' };\r\n      Object.assign(cat, payload);\r\n      await assetRepo.update(cat.id, cat);\r\n      const updatedOne = await assetRepo\r\n        .createQueryBuilder(\"p\")\r\n        .where({ uuid: uuid })\r\n        .getOne();\r\n      return { success: true, data: updatedOne };\r\n    } catch (err) {\r\n      return { success: false, message: err.message };\r\n    }\r\n  },\r\n\r\n  async remove(uuid) {\r\n    try {\r\n      const db = await LocalDB();\r\n      const assetRepo = getSQLRepository(db, Asset);\r\n      const cat = await assetRepo\r\n        .createQueryBuilder(\"p\")\r\n        .where({ uuid: uuid })\r\n        .getOne();\r\n      if (!cat) return { success: false, message: 'Not found' };\r\n      await assetRepo.delete(cat.id);\r\n      return { success: true, message: 'Deleted' };\r\n    } catch (err) {\r\n      return { success: false, message: err.message };\r\n    }\r\n  },\r\n\r\n  async processQueueSave(payload) {\r\n    try {\r\n      const db = await LocalDB();\r\n      const assetRepo = getSQLRepository(db, Asset);\r\n      payload.id = Number(payload.id); // Ensure id is a number\r\n      const existing = await assetRepo.findOne(payload.id);\r\n      if (existing) {\r\n        await assetRepo.update(payload.id, payload);\r\n      } else {\r\n        await assetRepo.save(payload);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error syncing categories:', error);\r\n    }\r\n  }\r\n};\r\n","<template>\r\n  <div class=\"uploader\">\r\n    <h1>File Uploader (Offline-first)</h1>\r\n\r\n    <p>\r\n      Status: <strong>{{ isOnline ? \"Online\" : \"Offline\" }}</strong>\r\n    </p>\r\n\r\n    <input type=\"file\" multiple @change=\"onPick\" />\r\n\r\n    <button @click=\"syncNow\" :disabled=\"syncing\">Sync now</button>\r\n\r\n    <h2>Queue</h2>\r\n    <table width=\"100%\">\r\n      <tr v-for=\"item in queue\" :key=\"item.id\">\r\n        <td width=\"60%\">\r\n          <!-- Image Preview -->\r\n          <div v-if=\"isImage(item)\" class=\"preview\">\r\n            <img class=\"h-auto max-w-full p-4\" :src=\"fileURL(item)\" :alt=\"item.name\" />\r\n          </div>\r\n\r\n          <!-- PDF Preview -->\r\n          <div v-else-if=\"isPDF(item)\" class=\"preview\">\r\n            <iframe :src=\"fileURL(item)\" frameborder=\"0\" class=\"w-full h-64\"></iframe>\r\n          </div>\r\n\r\n          <!-- Video Preview -->\r\n          <div v-else-if=\"isVideo(item)\" class=\"preview\">\r\n            <video class=\"w-full h-64\" controls>\r\n              <source :src=\"fileURL(item)\" :type=\"item.type\" />\r\n              Your browser does not support the video tag.\r\n            </video>\r\n          </div>\r\n\r\n          <!-- Audio Preview -->\r\n          <div v-else-if=\"isAudio(item)\" class=\"preview\">\r\n            <audio controls>\r\n              <source :src=\"fileURL(item)\" :type=\"item.type\" />\r\n              Your browser does not support the audio tag.\r\n            </audio>\r\n          </div>\r\n\r\n          <!-- Text Preview -->\r\n          <div v-else-if=\"isText(item)\" class=\"preview\">\r\n            <iframe :src=\"fileURL(item)\" frameborder=\"0\" class=\"w-full h-64\"></iframe>\r\n          </div>\r\n\r\n          <!-- ZIP / Archive Preview -->\r\n          <div v-else-if=\"isArchive(item)\" class=\"preview text-center p-4\">\r\n            <div class=\"p-4 border rounded bg-gray-100\">\r\n              <p class=\"font-bold\">{{ item.name }}</p>\r\n              <p class=\"text-sm text-gray-600\">{{ item.type || \"Archive File\" }}</p>\r\n              <a\r\n                :href=\"fileURL(item)\"\r\n                download\r\n                class=\"mt-2 inline-block bg-blue-500 text-white px-3 py-1 rounded\"\r\n              >\r\n                Download ZIP\r\n              </a>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Fallback: Other file types -->\r\n          <div v-else class=\"preview\">\r\n            <a :href=\"fileURL(item)\" target=\"_blank\" class=\"text-blue-500 underline\">\r\n              {{ item.name }} ({{ item.type || \"Unknown type\" }})\r\n            </a>\r\n          </div>\r\n        </td>\r\n\r\n        <td width=\"20%\">\r\n          <h2>{{ item.name }} ({{ human(item.size) }})</h2>\r\n        </td>\r\n        <td>\r\n          <button @click=\"rename(item)\">Rename</button>\r\n          <button @click=\"replace(item)\">Replace</button>\r\n          <button @click=\"deleteItem(item)\">Delete</button>\r\n          <span v-if=\"item.uploading\"> â€” uploading... </span>\r\n        </td>\r\n      </tr>\r\n    </table>\r\n\r\n    <h2>Uploaded</h2>\r\n    <table>\r\n      <tr v-for=\"u in uploaded\" :key=\"u.ts\">\r\n        <td>{{ u.name }}</td>\r\n      </tr>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, onBeforeUnmount } from \"vue\";\r\nimport { Asset } from \"@/entities/asset.entity\";\r\nimport { assetLocalService } from \"@/service/asset.local.service.js\";\r\n\r\nconst isOnline = ref(navigator.onLine);\r\nconst queue = ref([]);\r\nconst uploaded = ref([]);\r\nconst syncing = ref(false);\r\n\r\nfunction human(bytes) {\r\n  const units = [\"B\", \"KB\", \"MB\", \"GB\"];\r\n  let i = 0,\r\n    n = bytes;\r\n  while (n >= 1024 && i < units.length - 1) {\r\n    n /= 1024;\r\n    i++;\r\n  }\r\n  return `${n.toFixed(1)} ${units[i]}`;\r\n}\r\n\r\nfunction isImage(f) {\r\n  return f.type.startsWith(\"image/\");\r\n}\r\n\r\nfunction isPDF(f) {\r\n  return f.type === \"application/pdf\";\r\n}\r\n\r\nfunction isVideo(f) {\r\n  return f.type.startsWith(\"video/\");\r\n}\r\n\r\nfunction isAudio(f) {\r\n  return f.type.startsWith(\"audio/\");\r\n}\r\n\r\nfunction isText(f) {\r\n  return f.type.startsWith(\"text/\");\r\n}\r\n\r\n// ZIP, RAR, 7z and other archive types\r\nfunction isArchive(f) {\r\n  return (\r\n    f.type === \"application/zip\" ||\r\n    f.type === \"application/x-zip-compressed\" ||\r\n    f.type === \"application/x-rar-compressed\" ||\r\n    f.type === \"application/x-7z-compressed\" ||\r\n    f.name?.toLowerCase().endsWith(\".zip\") ||\r\n    f.name?.toLowerCase().endsWith(\".rar\") ||\r\n    f.name?.toLowerCase().endsWith(\".7z\")\r\n  );\r\n}\r\n\r\nfunction fileURL(f) {\r\n  return URL.createObjectURL(f.file);\r\n}\r\n\r\nasync function refreshQueue() {\r\n  const res = await assetLocalService.getAll(1, 500);\r\n  queue.value = res.data;\r\n}\r\n\r\nasync function onPick(e) {\r\n  let new_data = new Asset();\r\n  const files = Array.from(e.target.files || []);\r\n  for (const f of files) {\r\n    const payload = {\r\n      name: f.name,\r\n      size: f.size,\r\n      type: f.type,\r\n      file: f,\r\n      status: \"pending\",\r\n    };\r\n    new_data = { ...new_data, ...payload };\r\n    await assetLocalService.create(new_data);\r\n  }\r\n  await refreshQueue();\r\n}\r\n\r\n// CRUD operations\r\nasync function rename(item) {\r\n  const newName = prompt(\"Enter new name:\", item.name);\r\n  if (!newName) return;\r\n  item.name = newName;\r\n  item.status = \"pending\";\r\n  await assetLocalService.update(item.uuid, item);\r\n}\r\n\r\nasync function replace(item) {\r\n  const input = document.createElement(\"input\");\r\n  input.type = \"file\";\r\n  input.onchange = async (e) => {\r\n    const f = e.target.files[0];\r\n    if (!f) return;\r\n    item.name = f.name;\r\n    item.size = f.size;\r\n    item.type = f.type;\r\n    item.file = f;\r\n    item.status = \"pending\";\r\n    await assetLocalService.update(item.uuid, item);\r\n  };\r\n  input.click();\r\n}\r\n\r\nasync function deleteItem(item) {\r\n  if (!confirm(`Delete ${item.name}?`)) return;\r\n  await assetLocalService.remove(item.uuid);\r\n  await refreshQueue();\r\n}\r\n\r\nasync function syncNow() {\r\n  syncing.value = true;\r\n  //   try { triggerSync() }\r\n  //   finally { setTimeout(async () => { await refreshQueue(); syncing.value = false }, 500) }\r\n}\r\n\r\n// function handleOnline() { isOnline.value = true; triggerSync() }\r\n// function handleOffline() { isOnline.value = false }\r\n\r\nonMounted(async () => {\r\n  await refreshQueue();\r\n});\r\n\r\nonBeforeUnmount(() => {\r\n  //   window.removeEventListener('online', handleOnline)\r\n  //   window.removeEventListener('offline', handleOffline)\r\n});\r\n</script>\r\n\r\n<style scoped>\r\nh1 {\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.preview {\r\n  width: 250px;\r\n  height: 250px;\r\n  overflow: hidden;\r\n  margin-right: 0.5rem;\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n}\r\n\r\n.preview img {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n.preview iframe {\r\n  width: 250px;\r\n  height: 250px;\r\n}\r\n\r\nbutton {\r\n  margin-left: 0.3rem;\r\n}\r\n</style>\r\n","import script from \"./FileUpload.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./FileUpload.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./FileUpload.vue?vue&type=style&index=0&id=edc4cd8a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-edc4cd8a\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <div class=\"p-10 text-center\">\r\n      <h2 class=\"text-3xl font-bold text-purple-600\">About Page</h2>\r\n      <p>This is the About page.</p>\r\n    </div>\r\n    <div>\r\n      <p v-if=\"isMobile\">You are using a mobile device.</p>\r\n      <p v-else>You are using a desktop device.</p>\r\n      <Upload />\r\n      <!-- <h1>Users</h1>\r\n\r\n      <input v-model=\"name\" placeholder=\"Full Name\" />\r\n      <input v-model=\"email\" type=\"email\" placeholder=\"Email Name\" />\r\n      <button @click=\"addUser\">Add User</button>\r\n\r\n      <ul>\r\n        <li v-for=\"user in users\" :key=\"user.id\">\r\n          {{ user.name }} {{ user.email }} - Active: {{ user.isActive }}\r\n          <button @click=\"toggleActive(user)\">Toggle Active</button>\r\n          <button @click=\"deleteUser(user)\">Delete</button>\r\n        </li>\r\n      </ul> -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport Upload from './../components/FileUpload.vue'\r\n\r\n</script>\r\n","import script from \"./AboutPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AboutPage.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["assetLocalService","getAll","page","limit","getJWTUser","db","LocalDB","assetRepo","getSQLRepository","Asset","data","total","createQueryBuilder","skip","take","orderBy","created_at","findAndCount","Number","last_page","Math","ceil","err","console","error","success","message","create","payload","Date","toISOString","updated_at","saved","save","log","update","uuid","cat","where","getOne","Object","assign","id","updatedOne","remove","delete","processQueueSave","existing","findOne","isOnline","ref","navigator","onLine","queue","uploaded","syncing","human","bytes","units","i","n","length","toFixed","isImage","f","type","startsWith","isPDF","isVideo","isAudio","isText","isArchive","name","toLowerCase","endsWith","fileURL","URL","createObjectURL","file","async","refreshQueue","res","value","onPick","e","new_data","files","Array","from","target","size","status","rename","item","newName","prompt","replace","input","document","createElement","onchange","click","deleteItem","confirm","syncNow","onMounted","onBeforeUnmount","_createElementBlock","_hoisted_1","_createElementVNode","_toDisplayString","multiple","onChange","onClick","disabled","_hoisted_2","_hoisted_3","_Fragment","_renderList","key","_hoisted_4","_hoisted_5","class","src","alt","_hoisted_7","frameborder","_hoisted_9","_hoisted_10","_hoisted_12","_hoisted_13","_hoisted_15","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","href","download","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","$event","_hoisted_25","_hoisted_26","_hoisted_27","uploading","_hoisted_28","u","ts","__exports__","_ctx","isMobile","_createVNode","Upload"],"sourceRoot":""}